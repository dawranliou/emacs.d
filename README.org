#+TITLE:Daw-Ran Liou's Emacs Configuration
#+STARTUP: overview
#+PROPERTY: header-args:emacs-lisp :tangle init.el :results silent

This is an ongoing evolution of my original Emacs configuration files, inspired
by a bunch of resources Iâ€™ve found online:

- http://sriramkswamy.github.io/dotemacs/
- https://ambrevar.xyz/emacs/
- https://git.sr.ht/~technomancy/dotfiles/tree/master/item/.emacs.d
- https://github.com/angrybacon/dotemacs
- https://github.com/bbatsov/prelude
- https://github.com/bcmertz/dotfiles/tree/main/.emacs.d
- https://github.com/daviwil/dotfiles/blob/master/Emacs.org
- https://github.com/hlissner/doom-emacs
- https://github.com/ianpan870102/.wsl-emacs.d
- https://github.com/ianpan870102/yay-evil-emacs/blob/master/config.org
- https://github.com/karthink/.emacs.d
- https://github.com/magnars/.emacs.d
- https://github.com/meain/dotfiles/blob/master/emacs/.config/emacs/init.el
- https://github.com/meqif/.emacs.d
- https://github.com/mpereira/.emacs.d
- https://github.com/oantolin/emacs-config
- https://github.com/purcell/emacs.d
- https://github.com/raxod502/radian/blob/develop/emacs/radian.el
- https://github.com/sam217pa/emacs-config
- https://gitlab.com/ambrevar/dotfiles/-/tree/master/.emacs.d
- https://karthinks.com/software/batteries-included-with-emacs/
- https://luca.cambiaghi.me/vanilla-emacs/readme.html

Style guide:

- [[https://github.com/bbatsov/emacs-lisp-style-guide][bbatsov's emacs-lisp-style-guide]]

* Installation

#+begin_src shell
git clone --recursive git@github.com:dawranliou/emacs.d.git
#+end_src

* Startup performance

The startup time is ~0.9 seconds on my machine.  (It's ~0.4 seconds when things
are warm. Whatever that means.)  The only tricks I use is to increase the
startup GC threshold and defer loading package loading.  Nothing too fancy here.
I also set =straight-check-for-modifications= to =(check-on-save
find-when-checking)= because I don't usually tweak my dependencies.  If I do, I
know how to rebuild them when needed.

* Configuration structure

- =early-init.el= - See [[https://www.gnu.org/software/emacs/manual/html_node/emacs/Early-Init-File.html][The Early Init File]]
- =init.el= - The majority of the configuration
- =lisp/extras.el= - Couple of things I found online.

These are kept out of git's version control:

- =private.el= - The file is loaded after init.
- =custom.el= - The file is for the custom settings.


* On keybindings
Keybinding ideas:
- http://mbork.pl/2019-03-18_Free_Emacs_key_bindings

** Mac (OSX) ergonomics keybindings

Several OSX native keybindings that utilizes the command key (which is also the
=super= key) are added to make context-switching to other native apps easier,
e.g. Chrome, Firefox.

| Key           | Binding                 |
|---------------+-------------------------|
| s-'           | er/expand-region        |
| s-\           | er/contract-region      |
| s-=           | text-scale-adjust       |
| s--           | text-scale-decrease     |
| s-<backspace> | kill-whole-line         |
| s-F           | rg-project              |
| s-S           | write-file              |
| s-a           | mark-whole-buffer       |
| s-f           | isearch-forward         |
| s-g           | magit-status            |
| s-k           | kill-this-buffer        |
| s-l           | lsp-keymap              |
| s-p           | project-find-file       |
| s-q           | save-buffers-kill-emacs |
| s-s           | save-buffer             |
| s-t           | open scratch buffer     |
| s-v           | yank (paste)            |
| s-w           | delete-window           |

** Modal (Vim-style) keybindings

I used to use Spacemacs and then Doom Emacs and I like the idea of using =SPC=
as the prefix.  What I dislike about it is that many keybindings are too many
keystrokes away.  So I try to be conservative about what I added to the
=SPC=-prefixed keymap.

A good read about evil keybindings (and emacs keymaps in general):

- https://github.com/noctuid/evil-guide

| Key     | Binding                               |
|---------+---------------------------------------|
| SPC f d | find config                           |
| SPC t c | display-time-world                    |
| SPC t t | load theme                            |
| SPC t w | whitespace-mode                       |
| SPC t m | toggle-frame-maximized                |
| SPC t M | toggle-frame-fullscreen               |

** Emacs-style keybindings

There are some cases where I prefer emacs style keybindings.

| Key      | Binding               |
|----------+-----------------------|
| <escape> | keyboard-escape-quit  |
| C-e      | end-of-line           |
| C-y      | yank                  |
| C-k      | kill-line             |
| M-.      | xref-find-definition  |
| M-,      | xref-pop-marker-stack |
| s-.      | embark-dwim           |
| s-,      | xref-pop-marker-stack |
| C-x C-b  | ibuffer               |
| C-M-j    | switch-to-buffer      |
| M-:      | pp-eval-expression    |
| M-/      | hippie-expand         |
| M-o      | ace-window            |
| M-n      | scroll up 1 line      |
| M-p      | scroll down 1 line    |
| C-.      | embark-act            |
| C-h B    | embark-bindings       |
| C-c C-d  | helpful-at-point      |
| C-h C    | helpful-command       |
| C-h F    | describe-face         |
| C-x C-j  | dired-jump            |
| C-M-'    | eshell-toggle         |
| C-x g    | magit-status          |
| C-c g    | magit-file-dispatch   |
| M-y      | yank-pop+             |
| C-x C-r  | recentf-open-files+   |
| C-M-r    | selectrum-repeat      |
| C-;      | iedit-mode            |
| C-x C-z  | selectrum-repeat      |
